import{_ as D,ba as H,B as L}from"./index.a5309279.js";import{l as M,r as u,a as j,f as B,I as e,p as X,n as R,w as Y,j as ee,O as a,Q as n,U as m,F as _,W as C,S as y,R as f,V as w,P as z,aa as E,s as F,M as q,Z as U,L as te}from"./vue.c50f9232.js";const se={type:{type:Number,default:1},customClass:{type:String,default:""},value:{type:[Number,String],default:0},delay:{type:Number,default:2},speed:{type:Number,default:5},key:{type:[Number,String],default:new Date().getTime()},round:{type:Number,default:1},step:{type:Number,default:3},separator:{type:String,default:""},separatorClass:{type:String,default:""}};const le={class:"min-count-scroll"},ae={key:1,class:"all-count"},ne=M({props:se,emits:["finished"],setup(I,{emit:g}){const s=I,p=u(),h=j([0,1,2,3,4,5,6,7,8,9,0]),o=u(0),l=u(0),c=u(null),r=u(!1),T=u(0),P=B(()=>({transform:`translate3d(0,-${e(l)}px,0)`})),A=B(()=>({filter:e(r)?"blur(0px)":"blur(3px)"})),N=u(0),k=u(null),Q=j({allRef:[]}),W=B(()=>[...H(String(s.value),3,s.separator)]),Z=(t,d)=>{Q.allRef[d]=t},G=t=>{const d=t===s.separator,i=Number(t)*e(o);return{height:`${e(o)}px`,transform:`translate3d(0,-${d?0:e(r)?i:e(l)}px,0)`}},J=()=>{var t;V(),o.value=((t=e(c))==null?void 0:t.offsetHeight)||0,console.log(e(c)),T.value=new Date().getTime(),x()},K=()=>{var t;V(),o.value=((t=e(k))==null?void 0:t.offsetHeight)||0,console.log(e(k)),S()},v=()=>{cancelAnimationFrame(Number(p.value))},V=()=>{l.value=0,N.value=0,r.value=!1},x=()=>{v(),p.value=requestAnimationFrame(()=>{new Date().getTime()<=e(T)+s.delay*1e3?e(l)<e(o)*10?(l.value+=s.speed,x()):(l.value=0,x()):e(l)>=e(o)*10?(l.value=Number(s.value)*e(o),r.value=!0,v()):(l.value+=s.step,x())})},S=()=>{v(),p.value=requestAnimationFrame(()=>{e(N)<s.round?e(l)<e(o)*10?(l.value+=s.speed,S()):(N.value+=1,l.value=0,S()):e(l)>=e(o)*10?(r.value=!0,g("finished",!0),v()):(l.value+=s.step,S())})};return X(()=>{R(()=>{console.log(c.value),console.log(k.value)})}),Y(()=>s.value,(t,d)=>{s.type===2?t!==d&&R(()=>{K()}):R(()=>{J()})},{immediate:!0}),ee(()=>{v()}),(t,d)=>(a(),n("div",le,[t.type===1?(a(),n("div",{key:0,class:"single-count",style:m({height:`${o.value}px`})},[(a(!0),n(_,null,C(e(h),(i,$)=>(a(),n("div",{key:`single-count-${$}`,ref_for:!0,ref_key:"singleRef",ref:c,class:y(["single-count-item",t.customClass]),style:m(e(P))},[f("div",{style:m(e(A)),class:y([{"count-debounce":r.value}])},w(i),7)],6))),128))],4)):z("",!0),t.type===2?(a(),n("div",ae,[E(t.$slots,"prefix",{},void 0,!0),(a(!0),n(_,null,C(e(W),(i,$)=>(a(),n("div",{ref_for:!0,ref:b=>Z(b,$),key:`all-column${i}-${$}`,class:"all-count-column",style:m(G(i))},[i===s.separator?(a(),n("div",{key:0,class:y([t.separatorClass])},w(i),3)):(a(!0),n(_,{key:1},C(e(h),b=>(a(),n("div",{ref_for:!0,ref_key:"allItemRef",ref:k,key:`all-count${b}`,class:y(["all-count-item",t.customClass])},[f("div",{style:m(e(A)),class:y([{"count-debounce":r.value}])},w(b),7)],2))),128))],4))),128)),E(t.$slots,"suffix",{},void 0,!0)])):z("",!0)]))}});var O=D(ne,[["__scopeId","data-v-42656d62"]]);const oe={class:"count-scroll flex-column-center"},re={class:"single-count flex"},ue={key:1,style:{"font-size":"24px"}},ce=U("\u7C7B\u578B\u4E00: \u968F\u673A\u6570\u5B57"),ie={class:"single-count flex"},de=U("\u7C7B\u578B\u4E8C: \u5207\u6362\u6570\u5B57"),fe=M({setup(I){const g=u(["1",",","8","7","4"]),s=u("5678"),p=()=>{g.value=[...H(String(Math.floor(Math.random()*1e4)),3,",")]},h=()=>{s.value="35986"};return(o,l)=>(a(),n("div",oe,[f("div",re,[(a(!0),n(_,null,C(g.value,(c,r)=>(a(),n(_,{key:c},[c!==","?(a(),te(O,{key:`${c}-${r}`,class:"single-count-item",value:c,delay:r+.5},null,8,["value","delay"])):(a(),n("div",ue,","))],64))),128))]),f("div",null,[F(e(L),{type:"primary",onClick:p},{default:q(()=>[ce]),_:1})]),f("div",ie,[F(O,{"custom-class":"all-class","separator-class":"separator-class",type:2,value:s.value,separator:","},null,8,["value"])]),f("div",null,[F(e(L),{type:"primary",onClick:h},{default:q(()=>[de]),_:1})])]))}});var me=D(fe,[["__scopeId","data-v-34d14e2e"]]);export{me as default};
