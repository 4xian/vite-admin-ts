import{_ as e,ba as a,B as l}from"./index.a9d370ef.js";import{l as s,r as t,a as u,f as r,I as n,p as o,n as i,w as v,j as d,O as c,Q as p,U as f,F as m,W as y,S as g,R as b,V as k,P as x,aa as $,s as _,M as h,Z as N,L as S}from"./vue.c50f9232.js";const C={type:{type:Number,default:1},customClass:{type:String,default:""},value:{type:[Number,String],default:0},delay:{type:Number,default:2},speed:{type:Number,default:5},key:{type:[Number,String],default:(new Date).getTime()},round:{type:Number,default:1},step:{type:Number,default:3},separator:{type:String,default:""},separatorClass:{type:String,default:""}};const R={class:"min-count-scroll"},w={key:1,class:"all-count"};var F=e(s({props:C,emits:["finished"],setup(e,{emit:l}){const s=e,_=t(),h=u([0,1,2,3,4,5,6,7,8,9,0]),N=t(0),S=t(0),C=t(null),F=t(!1),I=t(0),j=r((()=>({transform:`translate3d(0,-${n(S)}px,0)`}))),A=r((()=>({filter:n(F)?"blur(0px)":"blur(3px)"}))),D=t(0),M=t(null),T=u({allRef:[]}),q=r((()=>[...a(String(s.value),3,s.separator)])),H=e=>{const a=e===s.separator,l=Number(e)*n(N);return{height:`${n(N)}px`,transform:`translate3d(0,-${a?0:n(F)?l:n(S)}px,0)`}},z=()=>{cancelAnimationFrame(Number(_.value))},B=()=>{S.value=0,D.value=0,F.value=!1},L=()=>{z(),_.value=requestAnimationFrame((()=>{(new Date).getTime()<=n(I)+1e3*s.delay?n(S)<10*n(N)?(S.value+=s.speed,L()):(S.value=0,L()):n(S)>=10*n(N)?(S.value=Number(s.value)*n(N),F.value=!0,z()):(S.value+=s.step,L())}))},O=()=>{z(),_.value=requestAnimationFrame((()=>{n(D)<s.round?n(S)<10*n(N)?(S.value+=s.speed,O()):(D.value+=1,S.value=0,O()):n(S)>=10*n(N)?(F.value=!0,l("finished",!0),z()):(S.value+=s.step,O())}))};return o((()=>{i((()=>{}))})),v((()=>s.value),((e,a)=>{2===s.type?e!==a&&i((()=>{var e;B(),N.value=(null==(e=n(M))?void 0:e.offsetHeight)||0,O()})):i((()=>{var e;B(),N.value=(null==(e=n(C))?void 0:e.offsetHeight)||0,I.value=(new Date).getTime(),L()}))}),{immediate:!0}),d((()=>{z()})),(e,a)=>(c(),p("div",R,[1===e.type?(c(),p("div",{key:0,class:"single-count",style:f({height:`${N.value}px`})},[(c(!0),p(m,null,y(n(h),((a,l)=>(c(),p("div",{key:`single-count-${l}`,ref_for:!0,ref_key:"singleRef",ref:C,class:g(["single-count-item",e.customClass]),style:f(n(j))},[b("div",{style:f(n(A)),class:g([{"count-debounce":F.value}])},k(a),7)],6)))),128))],4)):x("",!0),2===e.type?(c(),p("div",w,[$(e.$slots,"prefix",{},void 0,!0),(c(!0),p(m,null,y(n(q),((a,l)=>(c(),p("div",{ref_for:!0,ref:e=>((e,a)=>{T.allRef[a]=e})(e,l),key:`all-column${a}-${l}`,class:"all-count-column",style:f(H(a))},[a===s.separator?(c(),p("div",{key:0,class:g([e.separatorClass])},k(a),3)):(c(!0),p(m,{key:1},y(n(h),(a=>(c(),p("div",{ref_for:!0,ref_key:"allItemRef",ref:M,key:`all-count${a}`,class:g(["all-count-item",e.customClass])},[b("div",{style:f(n(A)),class:g([{"count-debounce":F.value}])},k(a),7)],2)))),128))],4)))),128)),$(e.$slots,"suffix",{},void 0,!0)])):x("",!0)]))}}),[["__scopeId","data-v-42656d62"]]);const I={class:"count-scroll flex-column-center"},j={class:"single-count flex"},A={key:1,style:{"font-size":"24px"}},D=N("类型一: 随机数字"),M={class:"single-count flex"},T=N("类型二: 切换数字");var q=e(s({setup(e){const s=t(["1",",","8","7","4"]),u=t("5678"),r=()=>{s.value=[...a(String(Math.floor(1e4*Math.random())),3,",")]},o=()=>{u.value="35986"};return(e,a)=>(c(),p("div",I,[b("div",j,[(c(!0),p(m,null,y(s.value,((e,a)=>(c(),p(m,{key:e},[","!==e?(c(),S(F,{key:`${e}-${a}`,class:"single-count-item",value:e,delay:a+.5},null,8,["value","delay"])):(c(),p("div",A,","))],64)))),128))]),b("div",null,[_(n(l),{type:"primary",onClick:r},{default:h((()=>[D])),_:1})]),b("div",M,[_(F,{"custom-class":"all-class","separator-class":"separator-class",type:2,value:u.value,separator:","},null,8,["value"])]),b("div",null,[_(n(l),{type:"primary",onClick:o},{default:h((()=>[T])),_:1})])]))}}),[["__scopeId","data-v-34d14e2e"]]);export{q as default};
