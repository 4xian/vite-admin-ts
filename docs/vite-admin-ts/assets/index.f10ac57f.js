var e,a=Object.defineProperty,l=Object.getOwnPropertySymbols,t=Object.prototype.hasOwnProperty,s=Object.prototype.propertyIsEnumerable,r=(e,l,t)=>l in e?a(e,l,{enumerable:!0,configurable:!0,writable:!0,value:t}):e[l]=t,i=(e,a)=>{for(var i in a||(a={}))t.call(a,i)&&r(e,i,a[i]);if(l)for(var i of l(a))s.call(a,i)&&r(e,i,a[i]);return e};import{an as o,_ as n,ap as u,B as d,aq as m,as as c,at as p}from"./index.a9d370ef.js";import{a as f,D as v,S as b,u as y,T as g}from"./useModalConfig.d34f085f.js";import{b as _,I as h,a as I}from"./Form.01e3ae42.js";import{l as N,r as x,a as C,O as j,L as k,M as w,s as O,I as T,E as R,f as E,Q as V,Z as S,V as U,P as F,R as P,F as q}from"./vue.c50f9232.js";import{P as L}from"./_baseFor.cb53e80d.js";import"./_createAssigner.9b3939d7.js";import"./_baseRest.adb9298d.js";import"./_baseIsEqual.0613a73a.js";import"./findIndex.9a74d622.js";import"./LeftOutlined.146ff0fb.js";import"./EyeOutlined.8cbea6e6.js";(e||(e={})).GET_USER_LIST="/api/getUserList";var z=N({props:{isEdit:{type:Boolean,default:!1},initValues:{default:()=>({roleName:"",permission:[]})}},setup(e,{expose:a}){const l=e,t={labelCol:{span:4,offset:2},wrapperCol:{span:10,offset:1}},s=x(null),r=C(l.initValues),i=C({userName:[{required:!0,message:"请输入用户名",trigger:"blur"}],roleName:[{required:!0,message:"请选择角色名",trigger:"blur"}],password:[{required:!0,message:"请输入密码",trigger:"blur"}]}),o=x([{value:"超级管理员",label:"超级管理员"},{value:"管理员",label:"管理员"},{value:"普通用户",label:"普通用户"}]),n=e=>{};return a({userRef:s}),(e,a)=>(j(),k(T(_),R({ref_key:"userRef",ref:s},t,{layout:"horizontal",rules:T(i),model:T(r),autocomplete:"off"}),{default:w((()=>[O(T(_).Item,{label:"所属角色",name:"roleName"},{default:w((()=>[O(T(f),{value:T(r).roleName,"onUpdate:value":a[0]||(a[0]=e=>T(r).roleName=e),options:o.value,style:{width:"120px"},onChange:n},null,8,["value","options"])])),_:1}),O(T(_).Item,{label:"用户名",name:"userName"},{default:w((()=>[O(T(h),{value:T(r).userName,"onUpdate:value":a[1]||(a[1]=e=>T(r).userName=e),placeholder:"请输入用户名"},null,8,["value"])])),_:1}),O(T(_).Item,{label:"密码",name:"password"},{default:w((()=>[O(T(I),{value:T(r).password,"onUpdate:value":a[2]||(a[2]=e=>T(r).password=e),placeholder:"请输入密码"},null,8,["value"])])),_:1})])),_:1},16,["rules","model"]))}});const B={class:"role-detail"};var G=N({props:{detail:Object},setup(e){const a=E((()=>({display:"flex",alignItems:"center",justifyContent:"center"}))),l=E((()=>({width:"140px"})));return(t,s)=>(j(),V("div",B,[O(T(v),{bordered:"",column:1,"label-style":T(l),"content-style":T(a)},{default:w((()=>[O(T(v).Item,{label:"用户名"},{default:w((()=>{var a;return[S(U(null==(a=e.detail)?void 0:a.userName),1)]})),_:1}),O(T(v).Item,{label:"角色名"},{default:w((()=>{var a;return[S(U(null==(a=e.detail)?void 0:a.roleName),1)]})),_:1}),O(T(v).Item,{label:"密码"},{default:w((()=>{var a;return[S(U(null==(a=e.detail)?void 0:a.password),1)]})),_:1})])),_:1},8,["label-style","content-style"])]))}});const M={class:"user-search"},A=S(" 新增 "),D={class:"search-right"},K=S(" 搜索 "),Q=S(" 重置 ");var Z=n(N({props:{add:{type:Function,default:()=>{}},search:{type:Function,default:()=>{}},reset:{type:Function,default:()=>{}}},setup(e){const a=C({name:"",role:""}),l=x(null);return(t,s)=>(j(),V("div",M,[T(u)("用户新增")?(j(),k(T(d),{key:0,type:"primary",onClick:e.add},{icon:w((()=>[O(T(L))])),default:w((()=>[A])),_:1},8,["onClick"])):F("",!0),P("div",D,[O(T(_),{ref_key:"formRef",ref:l,layout:"inline",model:T(a),autocomplete:"off"},{default:w((()=>[O(T(_).Item,{label:"用户名",name:"name"},{default:w((()=>[O(T(h),{value:T(a).name,"onUpdate:value":s[0]||(s[0]=e=>T(a).name=e),placeholder:"请输入用户名"},null,8,["value"])])),_:1}),O(T(_).Item,{label:"角色名",name:"role"},{default:w((()=>[O(T(h),{value:T(a).role,"onUpdate:value":s[1]||(s[1]=e=>T(a).role=e),placeholder:"请输入角色名"},null,8,["value"])])),_:1})])),_:1},8,["model"]),O(T(d),{type:"primary",style:{margin:"0 10px"},onClick:s[2]||(s[2]=l=>e.search(T(a)))},{icon:w((()=>[O(T(b))])),default:w((()=>[K])),_:1}),O(T(d),{danger:"",onClick:s[3]||(s[3]=a=>e.reset(T(l.value)))},{icon:w((()=>[O(T(m))])),default:w((()=>[Q])),_:1})])]))}}),[["__scopeId","data-v-7eb7d72d"]]);var H=N({setup(){const a=x(null),l=x([]),t=x(!1),s=y(),r=y(),n=x({}),m=C({userName:"",roleName:""}),f=()=>{var a;(a=m,o.get({url:e.GET_USER_LIST,params:a})).then((e=>{l.value=e.data})).catch((e=>{}))};f();const v=[{title:"用户名",align:"center",dataIndex:"userName"},{title:"所属角色",align:"center",dataIndex:"roleName"},{title:"创建时间",align:"center",dataIndex:"createTime"},{title:"修改时间",align:"center",dataIndex:"updateTime"},{title:"操作",align:"center",dataIndex:"action",customRender:({record:e})=>O(q,null,[u("用户编辑")&&O(d,{type:"primary",onClick:()=>N.edit(e),style:{marginRight:"10px"}},{default:()=>[S("编辑")]}),u("用户详情")&&O(d,{type:"primary",onClick:()=>N.detail(e),style:{marginRight:"10px"}},{default:()=>[S("详情")]}),u("用户删除")&&O(d,{danger:!0,onClick:()=>N.delete(e.userId)},{default:()=>[S("删除")]})])}],b=()=>{s.setVisible(!1),n.value={}},_=e=>{m.userName=e.name,m.roleName=e.role,f()},h=e=>{e.resetFields(),m.userName="",m.roleName="",f()},I={defaultPageSize:5,onChange(e,a){}};class N{static add(){s.setTitle("新增用户"),n.value={roleName:"超级管理员"},s.setVisible(!0),t.value=!1}static edit(e){n.value=i({},e),t.value=!0,s.setTitle("编辑用户"),s.setVisible(!0)}static detail(e){n.value=i({},e),r.setTitle("用户详情"),r.setVisible(!0)}static submit(){T(a).userRef.validate().then((e=>{})).catch((e=>{}))}static delete(e){c.confirm({title:"确认删除该条数据吗?",icon:O(p),okText:"确定",cancelText:"取消",maskClosable:!0,onOk:async()=>{}})}}return()=>O("div",null,[O(Z,{add:N.add,search:_,reset:h},null),O(g,{columns:v,rowKey:"userId",dataSource:T(l),bordered:!0,pagination:I,size:"small"},null),O(c,{width:800,title:T(s.title),visible:T(s.visible),onOk:N.submit,onCancel:b,destroyOnClose:!0,okText:"确认",cancelText:"取消"},{default:()=>[O(z,{ref:a,initValues:T(n),isEdit:T(t)},null)]}),O(c,{width:800,title:T(r.title),footer:null,visible:T(r.visible),destroyOnClose:!0,onCancel:()=>r.setVisible(!1)},{default:()=>[O(G,{detail:T(n)},null)]})])}});export{H as default};
